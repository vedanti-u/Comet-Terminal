<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Terminal</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            font-size: 16px;
        }

        .input-container {
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .controls {
            display: flex;
            gap: 5px;
        }

        .control-button {
            background-color: #232323;
            color: #fff;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
        }

        .control-button:hover {
            background-color: #333;
        }

        .input {
            background: none;
            border: none;
            color: #fff;
            font-family: "Proxima Nova", "Helvetica Neue", helvetica, arial, sans-serif;
            font-size: 16px;
            outline: none;
            margin: 0;
            padding: 0;
            display: inline;
            line-height: 1.5;
            width: 70%;
        }

        .input:focus {
            outline: none;
        }

        .prompt {
            color: #506479;
        }

        .output {
            color: #32c146;
        }

        .comment {
            opacity: 0.5;
        }

        .window {
            width: 80%;
            margin: 0 auto 2rem;
            box-shadow: 0 0.25rem 0.5rem #12181e;
            border-radius: 0 0 0.1rem 0.1rem;
        }

        .bar {
            background: #191919;
            height: 36px;
            border-radius: 0.5rem 0.5rem 0 0;
        }

        /* .btn::before,
        .btn::after,
        .btn {
            width: 12px;
            height: 12px;
            border-radius: 100%;
            display: block;
        }

        .btn {
            background: #f6b73e;
            position: relative;
            margin-left: 38px;
            top: 12px;
        }

        .btn::before,
        .btn::after {
            content: " ";
            position: absolute;
        }

        .btn::before {
            background: #f55551;
            margin-left: -20px;
        }

        .btn::after {
            background: #32c146;
            margin-left: 20px;
        } */

        .body {
            background: #232323;
            padding: 18px;
            min-height: 100px;
            /* Minimum height to prevent collapse */
            height: auto;
            /* Allow height to adjust automatically */
            overflow-y: auto;
            /* Add vertical scrollbar if content exceeds height */
        }

        .body pre {
            margin: 0;
        }

        .transparent .prompt {
            opacity: 0.5;
            /* Adjust opacity as needed */
        }

        .title {
            color: #fff;
            font-size: 3rem;
            /* Increase title font size */
            text-align: center;
            text-transform: uppercase;
            margin-bottom: 0.5rem;
            /* Adjust margin as needed */
        }

        .subtitle {
            color: #ddd;
            /* Darker color for subtitle */
            font-size: 1.2rem;
            /* Adjust subtitle font size */
            text-align: center;
            margin-bottom: 2rem;
            /* Adjust margin as needed */
            font-style: italic;
            /* Italicize subtitle */
        }

        .body {
            background: #232323;
            padding: 18px;
            font-family: 'Courier New', Courier, monospace;
            /* Monospace font for authenticity */
        }

        .output {
            color: #32c146;
            white-space: pre-wrap;
            /* Preserve whitespaces and line breaks */
        }
    </style>
</head>

<body>
    <h1 class="title">
        COMET
    </h1>
    <p class="subtitle">
        Your AI Terminal
    </p>
    <div class="window">
        <div class="bar">
            <div class="navbar">
                <div class="window-controls">
                    <span class="dot red"></span>
                    <span class="dot yellow"></span>
                    <span class="dot green"></span>
                </div>
                <div class="username">rcoem@ubuntu</div>
                <div class="icons">
                    <span>AI</span>
                    <span><svg fill="#ffffff" height="16px" width="16px" version="1.1" id="Layer_1"
                            xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                            viewBox="-77.76 -77.76 371.52 371.52" xml:space="preserve" stroke="#ffffff">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                            <g id="SVGRepo_iconCarrier">
                                <path
                                    d="M117.2,102.9c-4.6,11-17.2,16.1-28.2,11.5c-11-4.6-16.1-17.2-11.5-28.2c4.6-11,17.2-16.1,28.2-11.5 C116.7,79.3,121.8,91.9,117.2,102.9C117.2,102.9,117.2,102.9,117.2,102.9z M213.9,154.6c0,4.3-3.5,7.8-7.8,7.8c0,0,0,0,0,0h-12.7 v26.8c0,20.8-16.9,37.7-37.7,37.7c0,0,0,0,0,0h-15V254h-102v-81.1C-2.8,140.2-10,80.1,22.6,38.5C40.7,15.5,68.4,2,97.7,2 c43.4,0,83.4,32.6,91.7,68.4c1.9,8,4,28.8,4,28.8l19.9,52.4C213.7,152.5,213.9,153.5,213.9,154.6L213.9,154.6z M138.2,87.8l12.2-7.6 l-5.1-12.5l-14.1,3.2c-2.7-3.8-6-7.2-9.8-9.9l3.3-14l-12.5-5.2l-7.7,12.2c-4.6-0.8-9.4-0.8-14-0.1L83,41.5l-12.6,5.1l3.2,14 c-3.8,2.7-7.2,6-9.9,9.8l-14-3.3l-5.3,12.5l12.2,7.7c-0.8,4.6-0.8,9.4-0.1,14L44.3,109l5.1,12.5l14-3.2c2.7,3.8,6,7.2,9.8,9.9 l-3.3,14l12.5,5.2l7.7-12.2c4.6,0.8,9.4,0.8,14,0.1l7.6,12.2l12.5-5.1l-3.2-14.1c3.8-2.7,7.2-6,9.9-9.8l14,3.3l5.2-12.5l-12.2-7.7 C139,97.1,139,92.4,138.2,87.8z">
                                </path>
                            </g>
                        </svg></span>

                    <span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80" width="16px" height="16px">
                            <path fill="#dcd5f2"
                                d="M34.961,77.5l-2.274-9.096l-0.284-0.076c-4.999-1.338-9.552-3.958-13.168-7.577l-0.208-0.208 l-8.984,2.57l-5.038-8.727l6.74-6.517l-0.076-0.284c-0.681-2.549-1.026-5.101-1.026-7.586s0.345-5.037,1.026-7.586l0.076-0.284 l-6.74-6.517l5.038-8.727l8.984,2.57l0.208-0.208c3.616-3.619,8.169-6.239,13.168-7.577l0.284-0.076L34.961,2.5h10.076 l2.274,9.096l0.284,0.076c4.999,1.338,9.553,3.958,13.169,7.577l0.208,0.208l8.983-2.57l5.038,8.727l-6.74,6.517l0.076,0.284 c0.681,2.548,1.026,5.1,1.026,7.586c0,2.485-0.345,5.038-1.026,7.586l-0.076,0.284l6.74,6.516l-5.038,8.727l-8.984-2.57 l-0.208,0.208c-3.617,3.619-8.17,6.239-13.169,7.577l-0.284,0.076L45.038,77.5H34.961z M40,24.571 c-8.507,0-15.429,6.921-15.429,15.429S31.493,55.429,40,55.429S55.428,48.507,55.428,40S48.507,24.571,40,24.571z" />
                            <path fill="#8b75a1"
                                d="M44.648,3l2.108,8.431l0.143,0.571l0.569,0.152c4.914,1.315,9.39,3.89,12.944,7.447l0.416,0.417 l0.566-0.162l8.325-2.382l4.648,8.051l-6.248,6.041l-0.423,0.409l0.152,0.568c0.67,2.506,1.009,5.015,1.009,7.457 c0,2.442-0.34,4.951-1.009,7.456l-0.152,0.568l0.423,0.409l6.248,6.041l-4.648,8.051l-8.325-2.381l-0.566-0.162l-0.416,0.417 c-3.554,3.557-8.03,6.132-12.944,7.447l-0.569,0.152l-0.143,0.571L44.648,77h-9.296l-2.108-8.431l-0.143-0.571l-0.569-0.152 c-4.914-1.315-9.39-3.89-12.944-7.447l-0.416-0.417l-0.566,0.162l-8.325,2.381l-4.648-8.05l6.248-6.041l0.423-0.409l-0.152-0.568 c-0.67-2.506-1.009-5.015-1.009-7.457s0.34-4.95,1.009-7.457l0.152-0.568l-0.423-0.409l-6.248-6.041l4.648-8.05l8.325,2.381 l0.566,0.162l0.416-0.417c3.554-3.557,8.03-6.132,12.944-7.447l0.569-0.152l0.143-0.571L35.352,3H44.648 M40,55.929 c8.783,0,15.929-7.146,15.929-15.929S48.783,24.071,40,24.071c-8.783,0-15.929,7.146-15.929,15.929S31.217,55.929,40,55.929 M45.428,2H34.571l-2.297,9.189c-5.138,1.375-9.743,4.054-13.393,7.706l-9.076-2.596l-5.429,9.403l6.809,6.584 c-0.659,2.465-1.043,5.042-1.043,7.715s0.385,5.25,1.043,7.715l-6.809,6.584l5.429,9.403l9.076-2.596 c3.65,3.652,8.255,6.331,13.393,7.706L34.571,78h10.857l2.297-9.189c5.138-1.375,9.743-4.054,13.393-7.706l9.076,2.596 l5.429-9.403l-6.809-6.584c0.659-2.465,1.043-5.042,1.043-7.715s-0.384-5.25-1.043-7.715l6.809-6.584l-5.429-9.403l-9.076,2.596 c-3.65-3.652-8.255-6.331-13.393-7.706L45.428,2L45.428,2z M40,54.929c-8.245,0-14.929-6.684-14.929-14.929 c0-8.245,6.684-14.929,14.929-14.929S54.928,31.755,54.928,40C54.928,48.245,48.245,54.929,40,54.929L40,54.929z" />
                            <g>
                                <path fill="#eeebf7"
                                    d="M40,61.5c-11.855,0-21.5-9.645-21.5-21.5S28.145,18.5,40,18.5S61.5,28.145,61.5,40 S51.855,61.5,40,61.5z M40,31.5c-4.687,0-8.5,3.813-8.5,8.5s3.813,8.5,8.5,8.5s8.5-3.813,8.5-8.5S44.687,31.5,40,31.5z" />
                                <path fill="#8b75a1"
                                    d="M40,19c11.579,0,21,9.421,21,21s-9.421,21-21,21c-11.579,0-21-9.421-21-21S28.42,19,40,19 M40,49 c4.963,0,9-4.037,9-9s-4.037-9-9-9c-4.963,0-9,4.037-9,9S35.037,49,40,49 M40,18c-12.15,0-22,9.85-22,22c0,12.15,9.85,22,22,22 s22-9.85,22-22C62,27.85,52.15,18,40,18L40,18z M40,48c-4.418,0-8-3.582-8-8c0-4.418,3.582-8,8-8s8,3.582,8,8 C48,44.418,44.418,48,40,48L40,48z" />
                            </g>
                        </svg></span>
                </div>
            </div>

        </div>
        <div class="body">
            <pre>
                <div class="comment"># run this command:</div>
                <div class="output">$ hi</div>
            </pre>
        </div>
    </div>
    <footer>
        <!-- <img src="http://jamesduncombe.com/logo.svg" /> -->
    </footer>

    <script>
        const { ipcRenderer } = require('electron');


        window.onload = function () {
            appendInputContainer();
            // Listen for command output
            ipcRenderer.on('command-output', (event, output) => {
                appendOutput(output); // Use the existing function to append the output
                appendInputContainer();

            });
        }

        function handleInput(event) {
            if (event.key === 'Enter') {
                const inputText = event.target.value; // Get the input text
                ipcRenderer.send('run-command', inputText); // Send the input text to the main process
            }
        }

        function appendOutput(text) {
            const terminalBody = document.querySelector('.body');
            const outputDiv = document.createElement('div');
            outputDiv.classList.add('output');
            outputDiv.textContent = text;
            terminalBody.appendChild(outputDiv);
        }

        function appendInputContainer() {
            const terminalBody = document.querySelector('.body');
            const inputContainerDiv = document.createElement('div');
            inputContainerDiv.classList.add('input-container');
            inputContainerDiv.innerHTML = `
                <div class="prompt">$ <input type="text" class="input command" onkeydown="handleInput(event)" placeholder="Type your command..."></div>
                <div class="controls">
                    <button class="control-button">AI</button>
                    <button class="control-button">Error</button>
                    <button class="control-button">Help</button>
                </div>
            `;
            terminalBody.appendChild(inputContainerDiv);
            const newCommandInput = inputContainerDiv.querySelector('.command');
            newCommandInput.focus();

            const olderInputContainers = terminalBody.querySelectorAll('.input-container:not(:last-child) .controls');
            olderInputContainers.forEach(container => {
                container.style.visibility = 'hidden';

            });
            // Remove controls from previous input, if any
            const previousInputContainer = terminalBody.querySelector('.input-container:nth-last-child(2)');
            if (previousInputContainer) {
                const previousInputControls = previousInputContainer.querySelector('.controls');
                previousInputControls.remove();
            }
        }
    </script>
</body>

</html>